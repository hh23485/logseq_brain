tags:: Java, Spring Framework, Spring Cache, AOP, 架构设计

- 前言
	- 上次读 Spring 是很久以前的事情了，最近工作需要在改造一个工作流引擎，想要针对其中的每个工作节点加入缓存，但遇到很多在 Java 界早就被 Spring 解决的很好，但 C# 界或者说我部门还无人问津的事情，例如：
		- 如何侵入的向系统内加入缓存？
		- 如何无侵入的做到多级缓存？
		- 如何做到 AOP 编程？
		- 如何做到像插件一样自动装配？
	- 这些问题的答案是互相包含的，总之，我们在寻求一种类似 Spring Cache 的体验，当在系统中开启配置之后，无需做任何代码的修改，就能自动为所有的节点或者特定的节点开启缓存，无侵入，轻量级。
	- 然而，Spring 能做到这些，必然是依赖了 [[Dependency Injection]] 和 [Spring AOP]。但在 .Net 4.7.2 还没有这些官方的功能，在现有的系统中，即便使用 [[AutoFac]] 这样的依赖注入库，想要复现完整的体验，也不是一个容易的事情。所以再次重温一下 Spring Cache 的实现和自动装配的知识，看看如何最小的改动来支撑需求。
- Spring Cache 的使用体验
	- 开启
		- 使用 @Cacheable 来表示在方法调用前先查询缓存，如果有缓存就跳过调用
		- 使用 `@CachePut` 来表示在方法调用后，要写入缓存
		- 使用 `@CacheEvict` 表示需要